<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: template.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: template.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Wrapper for underscore's template utility to allow loading templates from files.
 * @module jsdoc/template
 */
'use strict';

var _ = require('underscore'),
    fs = require('jsdoc/fs'),
    path = require('path');

/**
 * @class
 * @classdesc Underscore template helper.
 * @param {string} filepath - Templates directory.
 */
exports.Template = function(filepath) {
    this.path = filepath;
    this.layout = null;
    this.cache = {};
    // override default template tag settings
    this.settings = {
        evaluate: /&lt;\?js([\s\S]+?)\?>/g,
        interpolate: /&lt;\?js=([\s\S]+?)\?>/g,
        escape: /&lt;\?js~([\s\S]+?)\?>/g
    };
};

/**
 * Loads template from given file.
 * @param {string} file - Template filename.
 * @return {function} Returns template closure.
 */
exports.Template.prototype.load = function(file) {
    return _.template(fs.readFileSync(file, 'utf8'), null, this.settings);
};

/**
 * Renders template using given data.
 *
 * This is low-level function, for rendering full templates use {@link Template.render()}.
 *
 * @param {string} file - Template filename.
 * @param {object} data - Template variables (doesn't have to be object, but passing variables dictionary is best way and most common use).
 * @return {string} Rendered template.
 */
exports.Template.prototype.partial = function(file, data) {
    file = path.resolve(this.path, file);

    // load template into cache
    if (!(file in this.cache)) {
        this.cache[file] = this.load(file);
    }

    // keep template helper context
    return this.cache[file].call(this, data);
};

/**
 * Renders template with given data.
 *
 * This method automaticaly applies layout if set.
 *
 * @param {string} file - Template filename.
 * @param {object} data - Template variables (doesn't have to be object, but passing variables dictionary is best way and most common use).
 * @return {string} Rendered template.
 */
exports.Template.prototype.render = function(file, data) {
    // main content
    var content = this.partial(file, data);

    // apply layout
    if (this.layout) {
        data.content = content;
        content = this.partial(this.layout, data);
    }

    return content;
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-jsdoc_app.html">jsdoc/app</a></li><li><a href="module-jsdoc_augment.html">jsdoc/augment</a></li><li><a href="module-jsdoc_borrow.html">jsdoc/borrow</a></li><li><a href="module-jsdoc_config.html">jsdoc/config</a></li><li><a href="module-jsdoc_doclet.html">jsdoc/doclet</a></li><li><a href="module-jsdoc_env.html">jsdoc/env</a></li><li><a href="module-jsdoc_fs.html">jsdoc/fs</a></li><li><a href="module-jsdoc_name.html">jsdoc/name</a></li><li><a href="module-jsdoc_package.html">jsdoc/package</a></li><li><a href="module-jsdoc_path.html">jsdoc/path</a></li><li><a href="module-jsdoc_plugins.html">jsdoc/plugins</a></li><li><a href="module-jsdoc_readme.html">jsdoc/readme</a></li><li><a href="module-jsdoc_schema.html">jsdoc/schema</a></li><li><a href="module-jsdoc_tag.html">jsdoc/tag</a></li><li><a href="module-jsdoc_template.html">jsdoc/template</a></li><li><a href="module-jsdoc_tutorial.html">jsdoc/tutorial</a></li></ul><h3>Namespaces</h3><ul><li><a href="module-jsdoc_app.jsdoc.html">jsdoc</a></li><li><a href="module-jsdoc_doclet.Doclet_setMeta_meta.html">meta</a></li><li><a href="module-jsdoc_doclet.Doclet_setMeta_meta.code.html">code</a></li></ul><h3>Classes</h3><ul><li><a href="module-jsdoc_config-Config.html">Config</a></li><li><a href="module-jsdoc_doclet.Doclet.html">Doclet</a></li><li><a href="module-jsdoc_package.Package.html">Package</a></li><li><a href="module-jsdoc_readme-ReadMe.html">ReadMe</a></li><li><a href="module-jsdoc_tag.Tag.html">Tag</a></li><li><a href="module-jsdoc_template.Template.html">Template</a></li><li><a href="module-jsdoc_tutorial.RootTutorial.html">RootTutorial</a></li><li><a href="module-jsdoc_tutorial.Tutorial.html">Tutorial</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.0-dev</a> on Fri Sep 14 2018 15:10:37 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
